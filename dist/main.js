(()=>{function g(){return h("div",null,h("h1",null,"Config"))}var i=class{constructor(e,n){this._analyser=e,this._ctx=n,this._bufferLength=this._analyser.frequencyBinCount,this._dataArray=new Uint8Array(this._bufferLength),this._analyser.fftSize=1024}drawBar(){this._analyser.getByteFrequencyData(this._dataArray),this._ctx.clearRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height),this._ctx.fillStyle="rgba(0, 0, 0, .1)",this._ctx.fillRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height);let e=this._ctx.canvas.width/this._bufferLength*14,n=0;for(let r=0;r<this._bufferLength;r++){let o=this._dataArray[r],l=this._ctx.createRadialGradient(this._ctx.canvas.width/2,this._ctx.canvas.height/2,0,this._ctx.canvas.width/2,this._ctx.canvas.height/2,this._ctx.canvas.width/2);l.addColorStop(0,"rgba(76, 235, 247, 0.1)"),l.addColorStop(1,`rgba(76, 235, 247, ${o/800})`),this._ctx.fillStyle=l,this._ctx.fillRect(n,this._ctx.canvas.height-o,e,o),n+=e+1}requestAnimationFrame(this.drawBar.bind(this))}clear(){this._ctx.clearRect(0,0,this._ctx.canvas.width,this._ctx.canvas.height)}};plugin.onConfig(()=>{let c=document.createElement("div");return ReactDOM.render(g(),c),c});var t=document.createElement("canvas");t.width=window.innerWidth;t.height=window.innerHeight;t.style.position="absolute";t.style.top="0";t.style.left="50%";t.style.transform="translateX(-50%)";t.style.zIndex="1";t.style.pointerEvents="none";var a,s,d;window.onresize=()=>{t.width=window.innerWidth,t.height=window.innerHeight};var u=t.getContext("2d");plugin.onLoad(c=>{betterncm.utils.waitForElement(".g-single").then(e=>{e.appendChild(t),new IntersectionObserver(r=>{r[0].intersectionRatio<=0?a.clear():s&&(a=new i(d,u),a.drawBar())}).observe(e)}),betterncm.utils.waitForElement(".btnp").then(e=>{loadedPlugins.LibFrontendPlay.addEventListener("updateCurrentAudioPlayer",n=>{s=n.currentTarget,d=s.currentAudioAnalyser,s.currentAudioPlayer.addEventListener("pause",r=>{console.log(`%c\u{1D491}\u{1D486}\u{1D482}\u{1D48F}\u{1D496}\u{1D495}
\u{1F60F}\u{1F623}\u{1F606}\u{1F601}\u{1F923}\u{1F602}
\u8C03\u8BD5\u65F6\u95F4:2023/7/15 19:14
\u6E90\u6587\u4EF6:main.ts
\u884C\u53F7:49
\u8C03\u8BD5\u6570\u636E:`,"color:rgba(250,212,0,.85);background:rgba(199,21,133,.29);","\u6682\u505C\u89E6\u53D1"),a.clear()}),s.currentAudioPlayer.addEventListener("play",r=>{console.log(`%c\u{1D491}\u{1D486}\u{1D482}\u{1D48F}\u{1D496}\u{1D495}
\u{1F60F}\u{1F623}\u{1F606}\u{1F601}\u{1F923}\u{1F602}
\u8C03\u8BD5\u65F6\u95F4:2023/7/15 19:15
\u6E90\u6587\u4EF6:main.ts
\u884C\u53F7:52
\u8C03\u8BD5\u6570\u636E:`,"color:rgba(250,212,0,.85);background:rgba(199,21,133,.29);","\u64AD\u653E\u89E6\u53D1"),a=new i(d,u),a.drawBar()})})})});})();
